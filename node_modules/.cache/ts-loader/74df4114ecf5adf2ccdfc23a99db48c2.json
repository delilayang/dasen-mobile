{"remainingRequest":"/Users/ziyi/mobilev2/node_modules/babel-loader/lib/index.js!/Users/ziyi/mobilev2/node_modules/ts-loader/index.js??ref--13-2!/Users/ziyi/mobilev2/src/router.ts","dependencies":[{"path":"/Users/ziyi/mobilev2/src/router.ts","mtime":1539938475174},{"path":"/Users/ziyi/mobilev2/node_modules/cache-loader/dist/cjs.js","mtime":1539251766020},{"path":"/Users/ziyi/mobilev2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ziyi/mobilev2/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n\n/* tslint:disable */\nimport Vue from 'vue';\nimport Router from 'vue-router';\nimport Home from './views/Home.vue';\nimport Orders from './views/Orders.vue';\nimport User from './views/User.vue';\nimport Game from './views/Game.vue';\nimport Funds from './views/Funds.vue';\nimport UCSetting from './views/uc/Setting.vue';\nVue.use(Router);\nexport var RouteDirections;\n\n(function (RouteDirections) {\n  RouteDirections[RouteDirections[\"none\"] = 0] = \"none\";\n  RouteDirections[RouteDirections[\"forward\"] = 1] = \"forward\";\n  RouteDirections[RouteDirections[\"backward\"] = 2] = \"backward\";\n})(RouteDirections || (RouteDirections = {}));\n\nexport var routerControl = new Vue({\n  data: function data() {\n    return {\n      direction: RouteDirections.none,\n      lastTitle: '首页'\n    };\n  }\n});\nvar routes = [{\n  path: '/',\n  name: '首页',\n  component: Home\n}, {\n  path: '/orders',\n  name: '未结算',\n  component: Orders\n}, {\n  path: '/game',\n  name: '游戏',\n  component: Game\n}, {\n  path: '/funds',\n  name: '资金管理',\n  component: Funds\n}, {\n  path: '/user',\n  name: '我的',\n  component: User,\n  meta: {// hideNav: true,\n    // fixedBody: true\n  }\n}, {\n  path: '/chat',\n  name: '聊天室',\n  // route level code-splitting\n  // this generates a separate chunk (about.[hash].js) for this route\n  // which is lazy-loaded when the route is visited.\n  component: function component() {\n    return import(\n    /* webpackChunkName: \"chat\" */\n    './views/Chat.vue');\n  },\n  meta: {\n    hideTab: true\n  }\n}, {\n  path: '/user/setting',\n  name: '设置',\n  component: UCSetting,\n  meta: {\n    hideTab: true\n  }\n}];\nvar router = new Router({\n  routes: routes,\n  linkActiveClass: \"active\"\n}); // simple history management\n\nvar history = window.sessionStorage;\nhistory.clear();\nvar historyCount = parseInt(history.getItem('count') || '') * 1 || 0;\nhistory.setItem('/', '0');\nvar isPush = false;\nvar endTime = Date.now();\nvar methods = ['push', 'go', 'replace', 'forward', 'back'];\ndocument.addEventListener('touchend', function () {\n  endTime = Date.now();\n});\nmethods.forEach(function (key) {\n  var method = router[key].bind(router);\n\n  router[key] = function () {\n    isPush = true;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    method.apply(null, args);\n  };\n});\nrouter.beforeEach(function (to, from, next) {\n  // set global loading..\n  var toIndex = history.getItem(to.path);\n  var fromIndex = history.getItem(from.path);\n\n  if (toIndex) {\n    if (!fromIndex || parseInt(toIndex, 10) > parseInt(fromIndex, 10) || toIndex === '0' && fromIndex === '0') {\n      // set forward direction\n      routerControl.direction = RouteDirections.forward;\n    } else {\n      // 判断是否是ios左滑返回\n      if (!isPush && Date.now() - endTime < 377) {\n        // set none direction\n        routerControl.direction = RouteDirections.none;\n      } else {\n        // set backward direction\n        routerControl.direction = RouteDirections.backward;\n      }\n    }\n  } else {\n    ++historyCount;\n    history.setItem('count', historyCount + '');\n    to.path !== '/' && history.setItem(to.path, historyCount + ''); // set forward direction\n\n    routerControl.direction = RouteDirections.forward;\n  }\n\n  if (/\\/http/.test(to.path)) {\n    var url = to.path.split('http')[1];\n    window.location.href = \"http\".concat(url);\n  } else {\n    next();\n  }\n});\nrouter.afterEach(function (to, from) {\n  isPush = false;\n  routerControl.lastTitle = from.name || '';\n});\nexport default router;",{"version":3,"sources":["/Users/ziyi/mobilev2/src/router.ts"],"names":[],"mappings":"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","sourcesContent":["/* tslint:disable */\nimport Vue, { VueConstructor } from 'vue';\nimport Router from 'vue-router';\nimport Home from './views/Home.vue';\nimport Orders from './views/Orders.vue';\nimport User from './views/User.vue';\nimport Game from './views/Game.vue';\nimport Funds from './views/Funds.vue';\nimport UCSetting from './views/uc/Setting.vue';\nimport { RouteConfig } from 'vue-router/types/router';\n\nVue.use(Router);\n\nexport const enum RouteDirections {\n    none,\n    forward,\n    backward\n}\n\nexport const routerControl = new Vue({\n    data() {\n        return {\n            direction: RouteDirections.none,\n            lastTitle: '首页'\n        }\n    }\n})\n\ninterface V2Router extends Router {\n    [propName: string]: any;\n}\n\nexport interface V2RouteConfig extends RouteConfig  {\n    meta?: {\n        hideNav?: boolean,\n        hideTab?: boolean,\n        fixedBody?: boolean\n    }\n}\n\nconst routes : V2RouteConfig[] = [\n    {\n        path: '/',\n        name: '首页',\n        component: Home\n    },\n    {\n        path: '/orders',\n        name: '未结算',\n        component: Orders\n    },\n    {\n        path: '/game',\n        name: '游戏',\n        component: Game,\n    },\n    {\n        path: '/funds',\n        name: '资金管理',\n        component: Funds,\n    },\n    {\n        path: '/user',\n        name: '我的',\n        component: User,\n        meta: {\n            // hideNav: true,\n            // fixedBody: true\n        }\n    },\n    {\n        path: '/chat',\n        name: '聊天室',\n        // route level code-splitting\n        // this generates a separate chunk (about.[hash].js) for this route\n        // which is lazy-loaded when the route is visited.\n        component: () => import(/* webpackChunkName: \"chat\" */ './views/Chat.vue'),\n        meta: {\n            hideTab: true\n        }\n    },\n    {\n        path: '/user/setting',\n        name: '设置',\n        component: UCSetting,\n        meta: {\n            hideTab: true\n        }\n    }\n]\n\nconst router: V2Router = new Router({ routes, linkActiveClass: \"active\" });\n\n// simple history management\nconst history = window.sessionStorage\nhistory.clear()\nlet historyCount = parseInt(history.getItem('count') || '') * 1 || 0\nhistory.setItem('/', '0')\nlet isPush = false\nlet endTime = Date.now()\nlet methods = ['push', 'go', 'replace', 'forward', 'back']\n\ndocument.addEventListener('touchend', () => {\n    endTime = Date.now()\n})\n\n\nmethods.forEach(key => {\n    let method = router[key].bind(router)\n    router[key] = function (...args: any[]) {\n        isPush = true\n        method.apply(null, args)\n    }\n})\n\nrouter.beforeEach((to, from, next) => {\n    // set global loading..\n    const toIndex = history.getItem(to.path)\n    const fromIndex = history.getItem(from.path)\n\n    if (toIndex) {\n        if (!fromIndex || parseInt(toIndex, 10) > parseInt(fromIndex, 10) || (toIndex === '0' && fromIndex === '0')) {\n            // set forward direction\n            routerControl.direction = RouteDirections.forward\n        } else {\n            // 判断是否是ios左滑返回\n            if (!isPush && (Date.now() - endTime) < 377) {\n                // set none direction\n                routerControl.direction = RouteDirections.none\n            } else {\n                // set backward direction\n                routerControl.direction = RouteDirections.backward\n            }\n        }\n    } else {\n        ++historyCount\n        history.setItem('count', historyCount + '')\n        to.path !== '/' && history.setItem(to.path, historyCount + '')\n        // set forward direction\n        routerControl.direction = RouteDirections.forward\n    }\n\n    if (/\\/http/.test(to.path)) {\n        let url = to.path.split('http')[1]\n        window.location.href = `http${url}`\n    } else {\n        next()\n    }\n})\n\n\nrouter.afterEach(function (to, from) {\n    isPush = false\n    routerControl.lastTitle = from.name || '';\n})\n\nexport default router;"],"sourceRoot":""}]}